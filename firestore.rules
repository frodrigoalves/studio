rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Default deny all
    match /{document=**} {
      allow read, write: if false;
    }

    // Allow public read/write access for trip records form
    match /tripRecords/{recordId} {
      allow read, create, update: if true;
      allow delete: if request.auth != null;
    }

    // Allow public read/write access for checklist records form
     match /checklistRecords/{recordId} {
      allow read, create, update: if true;
      allow delete: if request.auth != null;
    }
    
    // Allow public read/write access for fueling records form
    match /fuelingRecords/{recordId} {
      allow read, create: if true;
      allow update, delete: if request.auth != null;
    }
    
    match /tireRecords/{recordId} {
      allow read, create: if true;
      allow update, delete: if request.auth != null;
    }

    // Settings collections are read-only for clients, writable for admin
    match /dieselPrices/{priceId} {
      allow read: if true;
      allow create, update, delete: if request.auth != null;
    }
    
    match /vehicleParameters/{carId} {
        allow read: if true;
        allow create, update, delete: if request.auth != null;
    }
    
    match /maintenanceRecords/{recordId} {
        allow read: if true;
        allow create, update, delete: if request.auth != null;
    }
  }
}
